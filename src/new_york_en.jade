extends layouts/layout_en

block content
    +breadcrumbs()
        +breadcrumb("index_en.html") Home
        +breadcrumb("far_dest_en.html") Faraway destinations
        +breadcrumb() New York

    +header("Available accommodation:")

    .row
        form
            .form-group
                .row
                    .col-md-8.col-md-offset-2
                        .col-md-4
                            label.control-label.pull-right From
                            input.form-control.text-align-right(type="text" id="starting-price" placeholder=0)
                        .col-md-4
                            a.btn.btn-primary.btn-block.search-margin(id="search") Search
                        .col-md-4
                            label.control-label.pull-left To
                            input.form-control(type="text" id="ending-price" placeholder=0)

    #main-content

        +details_preview("../assets/img/new_york_times_square_1.jpg", "AKA Times Square", "Located in New York , this property is located 1 block from Times Square . It offers accommodation with a fully equipped kitchen and separate living room where there is a flat-screen TV.", "new_york_times_square.html", 500, 700, "en")

        +details_preview("../assets/img/new_york_marriott_1.jpg", "New York Marriott Marquis", "Located in the theater area of ​​Broadway , this 4-star hotel located at the Times Square . It offers 3 places to eat , including a rotating rooftop restaurant.", "new_york_marriott.html", 50, 600, "en")

        +details_preview("http://placehold.it/500x300", "Apartman C", "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam id dolor nec justo consectetur porta eu eget neque. Donec rhoncus condimentum metus nec bibendum. Donec fringilla et felis ut vulputate. Donec vel ipsum luctus lacus ultrices ornare. Maecenas non dui sed augue lobortis mollis.", "#", 50, 600, "en")

        +details_preview("http://placehold.it/500x300", "Apartman D", "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam id dolor nec justo consectetur porta eu eget neque. Donec rhoncus condimentum metus nec bibendum. Donec fringilla et felis ut vulputate. Donec vel ipsum luctus lacus ultrices ornare. Maecenas non dui sed augue lobortis mollis.", "#", 50, 600, "en")

        +details_preview("http://placehold.it/500x300", "Apartman E", "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam id dolor nec justo consectetur porta eu eget neque. Donec rhoncus condimentum metus nec bibendum. Donec fringilla et felis ut vulputate. Donec vel ipsum luctus lacus ultrices ornare. Maecenas non dui sed augue lobortis mollis.", "#", 50, 600, "en")

        +details_preview("http://placehold.it/500x300", "Apartman F", "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam id dolor nec justo consectetur porta eu eget neque. Donec rhoncus condimentum metus nec bibendum. Donec fringilla et felis ut vulputate. Donec vel ipsum luctus lacus ultrices ornare. Maecenas non dui sed augue lobortis mollis.", "#", 50, 600, "en")

        +details_preview("http://placehold.it/500x300", "Apartman G", "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam id dolor nec justo consectetur porta eu eget neque. Donec rhoncus condimentum metus nec bibendum. Donec fringilla et felis ut vulputate. Donec vel ipsum luctus lacus ultrices ornare. Maecenas non dui sed augue lobortis mollis.", "#", 50, 600, "en")

        +details_preview("http://placehold.it/500x300", "Apartman H", "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam id dolor nec justo consectetur porta eu eget neque. Donec rhoncus condimentum metus nec bibendum. Donec fringilla et felis ut vulputate. Donec vel ipsum luctus lacus ultrices ornare. Maecenas non dui sed augue lobortis mollis.", "#", 50, 600, "en")

        .row.text-center
            .col-lg-12
                ul.pagination
                    li: a( href="#" ) &laquo;
                    li.active: a( href="#" ) 1
                    li: a( href="#" ) 2
                    li: a( href="#" ) 3
                    li: a( href="#" ) &raquo;

block scripts
    script.
        $(document).ready(function(){
            if(window.opener != null){
                var doms = [];

                $('div[name=price]', window.opener.document).each(function(){

                    var starting_price = $(this).data('price-starting'),
                        ending_price = $(this).data('price-ending'),
                        current_price_starting = window.opener.$('#starting-price').val(),
                        current_price_ending = window.opener.$('#ending-price').val();

                    console.log(current_price_starting, current_price_ending, starting_price, ending_price);

                    if(current_price_starting <= ending_price && current_price_ending >= starting_price && starting_price < ending_price){
                        console.log( current_price_ending >= starting_price);
                        var parent = $(this).closest('.my-test-preview');
                        doms.push(parent);
                    }
                    
                });

                var main_content = "";
                $(doms).each(function(){
                    main_content += "<div class='my-test-preview'>" + $(this).html()  + "</div>";
                });

                console.log(main_content);

                $('#main-content').html(main_content);
            }
        });

        $('#search').on('click', function(){
            window.open('new_york_en.html');
        });